<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>摘苹果小游戏</title>
    <meta
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;"
      name="viewport"
    />
    <style>
      [v-cloak] {
        display: none !important;
      }
    </style>
    <link rel="stylesheet" href="./css/play.css" />
    <link rel="stylesheet" href="./css/dot.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
  </head>
  <body>
    <div
      id="app"
      class="app"
      :style="{'background-position-y':positionY >= 0 ? positionY+'%':'100%'}"
    >
      <img @click="play" src="./img/音乐.png" alt="" class="music" />
      <img src="img/松鼠.gif" class="sshu" />
      <a href="index.html"><img src="img/bank.png" class="back" /></a>
      <!-- <audio
        src="music/OMFG 2 - Pizza(1).mp3"
        autoplay="autoplay"
        loop
        id="audio"
      ></audio> -->
      <div class="process">{{currentIndex + 1}}/10&nbsp;</div>
      <img @click="play" src="./img/音乐.png" alt="" class="music" />
      <img src="img/xiaoren01.gif" class="girl" />
      <div
        id="panel"
        class="panel animate__animated animate__swing"
        v-show="panelVisible"
        v-cloak
      >
        <div class="panel-content">
          <div class="q-box">
            <div class="rel-div">
              <div style="display: flex; align-items: center; padding: 0 20px">
                <div class="c">
                  <img src="./img/数字背景.png" class="c-bg" alt="" />
                  <div class="c-content">{{currentIndex + 1}}</div>
                </div>
                <div class="panel-title">{{data[currentIndex].title}}</div>
              </div>
              <div class="answer" v-show="data[currentIndex]?.type == 0">
                <div class="q-item" @click="processHandler(0)">
                  <span>A&nbsp;&nbsp; {{data[currentIndex].item[0]}}</span>
                </div>
                <div class="q-item" @click="processHandler(1)">
                  <span>B&nbsp;&nbsp; {{data[currentIndex].item[1]}}</span>
                </div>
                <div class="q-item" @click="processHandler(2)">
                  <span>C&nbsp;&nbsp; {{data[currentIndex].item[2]}}</span>
                </div>
                <div class="q-item" @click="processHandler(3)">
                  <span>D&nbsp;&nbsp; {{data[currentIndex].item[3]}}</span>
                </div>
              </div>
              <div v-show="data[currentIndex]?.type == 2">
                <div @click="processHandler(0)" class="apple">
                  <img
                    src="./img/好苹果.png"
                    style="width: 45px; padding-right: 10px"
                  />好苹果
                </div>
                <div @click="processHandler(1)" class="apple">
                  <img
                    src="./img/坏苹果.png"
                    style="width: 45px; padding-right: 10px"
                  />坏苹果
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div
        class="real-wrapper animate__animated animate__bounce"
        v-show="is_correct==1"
        @click="next"
        v-cloak
      >
        <div class="real">
          <!-- <img src="./img/正确.gif" alt="" />
          <div>下一题</div>  -->
        </div>
      </div>
      <div
        class="real-wrapper animate__animated animate__bounce"
        v-show="is_correct==0"
        @click="next"
        v-cloak
      >
        <div class="real1">
          <!-- <img src="./img/错误.gif" alt="" />
          <div>下一题</div> -->
        </div>
      </div>
      <div
        class="real-wrapper2 animate__animated animate__zoomInUp"
        v-show="show_dialog2"
        @click="back"
        v-cloak
      >
        <img class="success" v-clock src="./img/金牌苹果王.png" alt="" />
      </div>
    </div>

    <script src="https://www.jq22.com/jquery/jquery-1.10.2.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14"></script>
    <script>
      const vm = new Vue({
        el: "#app",
        data() {
          return {
            show_dialog: false,
            show_dialog2: false,
            panelVisible: true,
            show_correct: false,
            positionY: -1,
            is_correct: -1,
            currentIndex: 0,
            position: -400,
            audio: null,
            index_: -1,
            elapsed: 0,
            data: [
              {
                id: 1,
                title:
                  "用户个人信息包括但不限于姓名、出生日期、身份证件号码、个人生物识别信息住址。",
                item: ["好苹果", "坏苹果"],
                type: 2,
                answer: 0,
              },
              {
                id: 2,
                title: "当有人向你索要验要验证码时你应该立即发送给他。",
                item: ["好苹果", "坏苹果"],
                type: 2,
                answer: 1,
              },
              {
                id: 3,
                title:
                  "用户个人敏感信息是指一旦泄露、非法提供或滥用可能危害人身和财产安全,极易导致个人名誉、身心健康受到损害或歧视性待遇等的个人信息。",
                item: ["好苹果", "坏苹果"],
                type: 2,
                answer: 2,
              },
              {
                id: 4,
                title: "你应在什么时候收集个人信息？",
                item: [
                  "在健身中心登记时",
                  "在酒店办理入住登记时",
                  "在进行满意度调查时",
                  "在贵宾金环会会籍登记时",
                ],
                type: 0,
                answer: 3,
              },
              {
                id: 5,
                title:
                  "用户个人信息包括但不限于姓名、出生日期、身份证件号码、个人生物识别信息住址。",
                item: ["好苹果", "坏苹果"],
                type: 2,
                answer: 4,
              },
              {
                id: 6,
                title: "当有人向你索要验要验证码时你应该立即发送给他。",
                item: ["好苹果", "坏苹果"],
                type: 2,
                answer: 4,
              },
              {
                id: 7,
                title:
                  "用户个人信息包括但不限于姓名、出生日期、身份证件号码、个人生物识别信息住址。",
                item: ["好苹果", "坏苹果"],
                type: 2,
                answer: 4,
              },
              {
                id: 8,
                title: "当有人向你索要验要验证码时你应该立即发送给他。",
                item: ["好苹果", "坏苹果"],
                type: 2,
                answer: 4,
              },
              {
                id: 9,
                title:
                  "用户个人信息包括但不限于姓名、出生日期、身份证件号码、个人生物识别信息住址。",
                item: ["好苹果", "坏苹果"],
                type: 2,
                answer: 4,
              },
              {
                id: 10,
                title: "你应在什么时候收集个人信息？",
                item: [
                  "在健身中心登记时",
                  "在酒店办理入住登记时",
                  "在进行满意度调查时",
                  "在贵宾金环会会籍登记时",
                ],
                type: 0,
                answer: 4,
              },
            ],
          };
        },
        mounted: function () {
          this.audio = document.getElementById("audio");
        },
        // 定义事件处理函数
        methods: {
          modalShowAction: function (param) {
            this.currentIndex = param;
          },
          play: function () {
            if (this.audio.paused) {
              this.audio.play();
            } else {
              this.audio.pause();
            }
          },
          processHandler: function (value) {
            console.log(value, this.data[this.currentIndex].answer);
            if (value == this.data[this.currentIndex].answer) {
              this.is_correct = 1;
            } else {
              this.show_dialog = true;
              this.is_correct = 0;
            }
          },
          next: function () {
            this.panelVisible = false;
            if (this.currentIndex == this.data.length - 1) {
              this.show_dialog2 = true;
              this.is_correct = -1;
              return;
            }
            $("#panel").removeClass("animate__animated animate__swing ");
            setTimeout(() => {
              this.panelVisible = true;
              $("#panel").addClass("animate__animated animate__swing ");
            }, 100);
            this.is_correct = -1;
            this.currentIndex = this.currentIndex + 1;
            console.log(100 - this.currentIndex * 10);
            this.elapsed = 0;
            this.animloop();
          },
          animloop() {
            let req = window.requestAnimationFrame(this.animloop);
            // const prePositionY = this.positionY >= 0 ? this.positionY : 90;
            if (this.elapsed <= 10) {
              this.positionY = 90 - this.currentIndex * this.elapsed;
              this.elapsed = this.elapsed + 0.2;
            } else {
              cancelAnimationFrame(req);
            }
          },
          back() {
            window.location.href = "./index.html";
          },
        },
      });
    </script>
  </body>
</html>
